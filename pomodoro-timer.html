<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>POMO â€” Focus Timer on Trac Network</title>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Mono:wght@300;400;500&display=swap" rel="stylesheet"/>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg: #0a0a0a;
      --surface: #111111;
      --border: #222;
      --accent: #e8ff47;
      --accent2: #ff4747;
      --accent3: #47c8ff;
      --text: #f0f0f0;
      --muted: #555;
      --timer-size: min(340px, 80vw);
    }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'DM Mono', monospace;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: relative;
    }

    /* Grain overlay */
    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");
      pointer-events: none;
      z-index: 100;
      opacity: 0.4;
    }

    /* Background glow */
    .glow-bg {
      position: fixed;
      width: 600px;
      height: 600px;
      border-radius: 50%;
      filter: blur(120px);
      opacity: 0.06;
      pointer-events: none;
      transition: background 1s ease;
    }
    .glow-bg.one { background: var(--accent); top: -200px; left: -200px; }
    .glow-bg.two { background: var(--accent3); bottom: -200px; right: -200px; }

    .wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 32px;
      padding: 24px;
      position: relative;
      z-index: 1;
    }

    /* Header */
    .header {
      text-align: center;
    }
    .logo {
      font-family: 'Bebas Neue', sans-serif;
      font-size: clamp(36px, 8vw, 56px);
      letter-spacing: 6px;
      color: var(--accent);
      line-height: 1;
    }
    .tagline {
      font-size: 10px;
      color: var(--muted);
      letter-spacing: 3px;
      text-transform: uppercase;
      margin-top: 4px;
    }

    /* Mode tabs */
    .modes {
      display: flex;
      gap: 0;
      border: 1px solid var(--border);
      border-radius: 4px;
      overflow: hidden;
    }
    .mode-btn {
      background: none;
      border: none;
      color: var(--muted);
      font-family: 'DM Mono', monospace;
      font-size: 11px;
      letter-spacing: 2px;
      text-transform: uppercase;
      padding: 8px 18px;
      cursor: pointer;
      transition: all 0.2s;
      border-right: 1px solid var(--border);
    }
    .mode-btn:last-child { border-right: none; }
    .mode-btn.active {
      background: var(--accent);
      color: #000;
      font-weight: 500;
    }
    .mode-btn:hover:not(.active) { color: var(--text); background: #1a1a1a; }

    /* Timer circle */
    .timer-container {
      position: relative;
      width: var(--timer-size);
      height: var(--timer-size);
    }

    .timer-svg {
      width: 100%;
      height: 100%;
      transform: rotate(-90deg);
    }

    .timer-track {
      fill: none;
      stroke: var(--border);
      stroke-width: 3;
    }

    .timer-progress {
      fill: none;
      stroke: var(--accent);
      stroke-width: 3;
      stroke-linecap: round;
      transition: stroke-dashoffset 1s linear, stroke 0.5s ease;
    }

    .timer-inner {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 4px;
    }

    .timer-display {
      font-family: 'Bebas Neue', sans-serif;
      font-size: clamp(72px, 18vw, 100px);
      line-height: 1;
      letter-spacing: 4px;
      color: var(--text);
      transition: color 0.3s;
    }

    .timer-label {
      font-size: 10px;
      letter-spacing: 4px;
      color: var(--muted);
      text-transform: uppercase;
    }

    .session-count {
      display: flex;
      gap: 6px;
      margin-top: 8px;
    }
    .dot {
      width: 7px;
      height: 7px;
      border-radius: 50%;
      background: var(--border);
      border: 1px solid var(--muted);
      transition: background 0.3s, border-color 0.3s;
    }
    .dot.done {
      background: var(--accent);
      border-color: var(--accent);
    }

    /* Controls */
    .controls {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .btn {
      background: none;
      border: 1px solid var(--border);
      color: var(--muted);
      font-family: 'DM Mono', monospace;
      font-size: 11px;
      letter-spacing: 2px;
      text-transform: uppercase;
      padding: 10px 20px;
      border-radius: 3px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .btn:hover { color: var(--text); border-color: var(--muted); }

    .btn-main {
      background: var(--accent);
      border-color: var(--accent);
      color: #000;
      font-size: 13px;
      padding: 14px 40px;
      letter-spacing: 3px;
    }
    .btn-main:hover { background: #d4e83f; border-color: #d4e83f; color: #000; }
    .btn-main.running {
      background: none;
      border-color: var(--accent2);
      color: var(--accent2);
    }
    .btn-main.running:hover { background: var(--accent2); color: #fff; }

    /* Stats bar */
    .stats {
      display: flex;
      gap: 32px;
      border-top: 1px solid var(--border);
      padding-top: 20px;
    }
    .stat {
      text-align: center;
    }
    .stat-num {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 28px;
      color: var(--accent);
      letter-spacing: 2px;
      line-height: 1;
    }
    .stat-label {
      font-size: 9px;
      color: var(--muted);
      letter-spacing: 3px;
      text-transform: uppercase;
      margin-top: 2px;
    }

    /* Task input */
    .task-section {
      width: 100%;
      max-width: 360px;
    }
    .task-label {
      font-size: 9px;
      letter-spacing: 3px;
      color: var(--muted);
      text-transform: uppercase;
      margin-bottom: 8px;
    }
    .task-input {
      width: 100%;
      background: var(--surface);
      border: 1px solid var(--border);
      color: var(--text);
      font-family: 'DM Mono', monospace;
      font-size: 12px;
      padding: 10px 14px;
      border-radius: 3px;
      outline: none;
      transition: border-color 0.2s;
      letter-spacing: 1px;
    }
    .task-input::placeholder { color: var(--muted); }
    .task-input:focus { border-color: var(--accent); }

    /* Status message */
    .status-msg {
      font-size: 10px;
      letter-spacing: 2px;
      color: var(--muted);
      text-transform: uppercase;
      height: 14px;
      transition: color 0.3s;
    }

    /* Pulse animation when running */
    @keyframes pulse-ring {
      0% { transform: scale(1); opacity: 0.6; }
      50% { transform: scale(1.02); opacity: 0.3; }
      100% { transform: scale(1); opacity: 0.6; }
    }
    .timer-container.running::after {
      content: '';
      position: absolute;
      inset: -8px;
      border-radius: 50%;
      border: 1px solid var(--accent);
      animation: pulse-ring 2s ease-in-out infinite;
      pointer-events: none;
    }

    /* Footer */
    .footer {
      font-size: 9px;
      color: #2a2a2a;
      letter-spacing: 2px;
      text-transform: uppercase;
      text-align: center;
    }
    .footer span { color: var(--accent); }
  </style>
</head>
<body>

<div class="glow-bg one"></div>
<div class="glow-bg two"></div>

<div class="wrapper">
  <div class="header">
    <div class="logo">POMO</div>
    <div class="tagline">Focus Timer Â· Built on Trac Network</div>
  </div>

  <div class="modes">
    <button class="mode-btn active" onclick="setMode('focus')">Focus</button>
    <button class="mode-btn" onclick="setMode('short')">Short Break</button>
    <button class="mode-btn" onclick="setMode('long')">Long Break</button>
  </div>

  <div class="task-section">
    <div class="task-label">Current task</div>
    <input class="task-input" id="taskInput" type="text" placeholder="What are you working on?" maxlength="60"/>
  </div>

  <div class="timer-container" id="timerContainer">
    <svg class="timer-svg" viewBox="0 0 340 340">
      <circle class="timer-track" cx="170" cy="170" r="158"/>
      <circle class="timer-progress" id="progressCircle" cx="170" cy="170" r="158"
        stroke-dasharray="992.9"
        stroke-dashoffset="0"/>
    </svg>
    <div class="timer-inner">
      <div class="timer-display" id="timerDisplay">25:00</div>
      <div class="timer-label" id="timerLabel">Focus Session</div>
      <div class="session-count" id="sessionDots"></div>
    </div>
  </div>

  <div class="status-msg" id="statusMsg">Ready when you are</div>

  <div class="controls">
    <button class="btn" onclick="skipSession()">Skip</button>
    <button class="btn-main" id="mainBtn" onclick="toggleTimer()">START</button>
    <button class="btn" onclick="resetTimer()">Reset</button>
  </div>

  <div class="stats">
    <div class="stat">
      <div class="stat-num" id="statSessions">0</div>
      <div class="stat-label">Sessions</div>
    </div>
    <div class="stat">
      <div class="stat-num" id="statFocused">0m</div>
      <div class="stat-label">Focused</div>
    </div>
    <div class="stat">
      <div class="stat-num" id="statStreak">0</div>
      <div class="stat-label">Streak</div>
    </div>
  </div>

  <div class="footer">POMO Â· <span>Trac Network</span> Â· Intercom Vibe Competition</div>
</div>

<script>
  const MODES = {
    focus:  { label: 'Focus Session',  mins: 25, accent: '#e8ff47', accent2: '#47c8ff' },
    short:  { label: 'Short Break',    mins: 5,  accent: '#47c8ff', accent2: '#e8ff47' },
    long:   { label: 'Long Break',     mins: 15, accent: '#ff4747', accent2: '#e8ff47' },
  };

  let mode = 'focus';
  let totalSeconds = 25 * 60;
  let remaining = totalSeconds;
  let running = false;
  let interval = null;
  let sessions = 0;
  let focusedMinutes = 0;
  let streak = 0;
  let sessionInProgress = false;

  const circumference = 2 * Math.PI * 158; // 992.9

  function setMode(m) {
    if (running) return;
    mode = m;
    document.querySelectorAll('.mode-btn').forEach((b, i) => {
      b.classList.toggle('active', ['focus','short','long'][i] === m);
    });
    totalSeconds = MODES[m].mins * 60;
    remaining = totalSeconds;
    sessionInProgress = false;
    updateDisplay();
    updateProgress(1);
    setAccent(MODES[m].accent, MODES[m].accent2);
    document.getElementById('statusMsg').textContent = 'Ready when you are';
  }

  function setAccent(a, a2) {
    document.documentElement.style.setProperty('--accent', a);
    document.documentElement.style.setProperty('--accent3', a2);
  }

  function pad(n) { return String(n).padStart(2, '0'); }

  function updateDisplay() {
    const m = Math.floor(remaining / 60);
    const s = remaining % 60;
    document.getElementById('timerDisplay').textContent = `${pad(m)}:${pad(s)}`;
    document.getElementById('timerLabel').textContent = MODES[mode].label;
    document.title = `${pad(m)}:${pad(s)} â€” POMO`;
  }

  function updateProgress(ratio) {
    const offset = circumference * (1 - ratio);
    document.getElementById('progressCircle').style.strokeDashoffset = offset;
  }

  function renderDots() {
    const container = document.getElementById('sessionDots');
    container.innerHTML = '';
    for (let i = 0; i < 4; i++) {
      const d = document.createElement('div');
      d.className = 'dot' + (i < sessions % 4 ? ' done' : '');
      container.appendChild(d);
    }
  }

  function toggleTimer() {
    if (running) {
      pause();
    } else {
      start();
    }
  }

  function start() {
    running = true;
    sessionInProgress = true;
    document.getElementById('mainBtn').textContent = 'PAUSE';
    document.getElementById('mainBtn').classList.add('running');
    document.getElementById('timerContainer').classList.add('running');
    document.getElementById('statusMsg').textContent = 'Stay focused Â· You got this';
    interval = setInterval(tick, 1000);
  }

  function pause() {
    running = false;
    clearInterval(interval);
    document.getElementById('mainBtn').textContent = 'RESUME';
    document.getElementById('mainBtn').classList.remove('running');
    document.getElementById('timerContainer').classList.remove('running');
    document.getElementById('statusMsg').textContent = 'Paused Â· Come back soon';
  }

  function resetTimer() {
    running = false;
    clearInterval(interval);
    remaining = totalSeconds;
    sessionInProgress = false;
    document.getElementById('mainBtn').textContent = 'START';
    document.getElementById('mainBtn').classList.remove('running');
    document.getElementById('timerContainer').classList.remove('running');
    document.getElementById('statusMsg').textContent = 'Ready when you are';
    updateDisplay();
    updateProgress(1);
  }

  function skipSession() {
    clearInterval(interval);
    running = false;
    completeSession(false);
  }

  function tick() {
    remaining--;
    updateDisplay();
    updateProgress(remaining / totalSeconds);
    if (remaining <= 0) {
      clearInterval(interval);
      running = false;
      completeSession(true);
    }
  }

  function completeSession(natural) {
    document.getElementById('mainBtn').textContent = 'START';
    document.getElementById('mainBtn').classList.remove('running');
    document.getElementById('timerContainer').classList.remove('running');

    if (mode === 'focus' && natural) {
      sessions++;
      focusedMinutes += MODES.focus.mins;
      streak++;
      document.getElementById('statSessions').textContent = sessions;
      document.getElementById('statFocused').textContent = focusedMinutes + 'm';
      document.getElementById('statStreak').textContent = streak;
      renderDots();
      document.getElementById('statusMsg').textContent = 'ðŸŽ¯ Session complete! Take a break.';
      // auto switch to break
      setTimeout(() => {
        setMode(sessions % 4 === 0 ? 'long' : 'short');
      }, 1500);
    } else if (mode !== 'focus') {
      document.getElementById('statusMsg').textContent = 'Break over Â· Back to work!';
      setTimeout(() => setMode('focus'), 1500);
    } else {
      document.getElementById('statusMsg').textContent = 'Session skipped';
      remaining = totalSeconds;
      updateDisplay();
      updateProgress(1);
    }

    // Notify
    if (natural && 'Notification' in window && Notification.permission === 'granted') {
      new Notification('POMO', { body: mode === 'focus' ? 'Focus session complete! Time for a break.' : 'Break over â€” back to focus!' });
    }
  }

  // Request notification permission
  if ('Notification' in window && Notification.permission === 'default') {
    Notification.requestPermission();
  }

  // Init
  renderDots();
  updateDisplay();
  updateProgress(1);
</script>
</body>
</html>
